{
  "components": {},
  "info": {
    "title": "Streams Master Data - Filtered Consumer (HTTP POST)",
    "version": "1.0.0",
    "description": "Master Data Filtered Consumer API - Kafka to HTTP POST endpoint with filtering logic that sends filtered subset of master data to downstream ERP systems via HTTP POST requests"
  },
  "openapi": "3.0.3",
  "paths": {},
  "servers": [
    {
      "url": "http://tyk-gateway.localhost:8080/streams-master-data-filtered-http/"
    }
  ],
  "x-tyk-api-gateway": {
    "info": {
      "id": "master-data-filtered-consumer-http-api",
      "name": "Streams Master Data Filtered Consumer (HTTP POST)",
      "orgId": "5e9d9544a1dcd60001d0ed20",
      "state": {
        "active": true
      }
    },
    "server": {
      "listenPath": {
        "strip": true,
        "value": "/streams-master-data-filtered-http/"
      }
    },
    "upstream": {
      "url": ""
    },
    "middleware": {
      "global": {
        "trafficLogs": {
          "enabled": true
        },
        "contextVariables": {
          "enabled": true
        }
      }
    }
  },
  "x-tyk-streaming": {
    "streams": {
      "consumer": {
        "input": {
          "kafka": {
            "addresses": [
              "kafka:9092"
            ],
            "checkpoint_limit": 1,
            "client_id": "master-data-filtered-consumer-http",
            "consumer_group": "filtered-consumers-http",
            "target_version": "3.8.0",
            "topics": [
              "master-data-items"
            ]
          }
        },
        "pipeline": {
          "processors": [
            {
              "bloblang": "root = if this.category.lowercase() == \"electronics\" { this } else { deleted() }"
            }
          ]
        },
        "output": {
          "http_client": {
            "url": "http://erp-servers:8003/erp/filtered/receive",
            "verb": "POST",
            "headers": {
              "Content-Type": "application/json"
            }
          }
        }
      }
    }
  }
}

