ALLOW_REGISTRATIONS=true
SITE_URL=http://localhost:3000
FROM_EMAIL=noreply@tyk.io
DEBUG_HTTP=false
DEBUG_HTTP_PROXY=false
DATABASE_URL=/app/db/ai-studio.db # Use absolute path
DATABASE_TYPE=sqlite
ECHO_CONVERSATION=true
TYK_AI_SECRET_KEY=your-secret-key-here  # Can be any string, used for encrypting secrets and SSO (if ENT)
DOCS_URL=http://localhost:8989
PROXY_URL=http://localhost:9091
TOOL_DISPLAY_URL=http://localhost:9090
DATASOURCE_DISPLAY_URL=http://localhost:9090
DEFAULT_SIGNUP_MODE="both"


# ============================================================================
# Enterprise Edition - SSO Configuration
# ============================================================================
# SSO (Single Sign-On) is available exclusively in Enterprise Edition
# TIB_ENABLED is deprecated - SSO availability is determined by edition
TIB_ENABLED=true

# TYK_AI_SECRET_KEY is required for SSO functionality (see above)
# Configure SSO profiles via the Admin UI at /admin/sso-profiles

# ============================================================================
# AI Studio OCI Plugin Configuration (Optional)
# ============================================================================
# To enable OCI plugin support, set AI_STUDIO_OCI_CACHE_DIR
# If not set, AI Studio will only support local plugin binaries

# Enable OCI plugin support by setting cache directory
AI_STUDIO_OCI_CACHE_DIR=./data/cache/plugins

# Cache configuration
# AI_STUDIO_OCI_MAX_CACHE_SIZE=1073741824  # 1GB default

# Security settings
AI_STUDIO_OCI_REQUIRE_SIGNATURE=true    # Default false for AI Studio (more permissive) - Enterprise Edition only
AI_STUDIO_OCI_ALLOWED_REGISTRIES=localhost:5100,docker.tyk.io
OCI_PLUGINS_PUBKEY_FILE_LIVE=./keys/plugins/plugin-live.pub

# Network settings
AI_STUDIO_OCI_TIMEOUT=30s
AI_STUDIO_OCI_RETRY_ATTEMPTS=3

# Garbage collection
AI_STUDIO_OCI_GC_INTERVAL=24h
AI_STUDIO_OCI_KEEP_VERSIONS=3

# Advanced settings
AI_STUDIO_OCI_INSECURE_REGISTRIES=localhost:5100

# ============================================================================
# OCI Registry Authentication (Shared with Microgateway)
# ============================================================================
# Authentication for private registries
# Replace MYREGISTRY_COM with your registry domain (dots become underscores)

# Basic authentication
# OCI_PLUGINS_REGISTRY_MYREGISTRY_COM_USERNAME=myuser
# OCI_PLUGINS_REGISTRY_MYREGISTRY_COM_TOKEN_ENV=MY_REGISTRY_TOKEN

# Alternative: Direct token (less secure)
# OCI_PLUGINS_REGISTRY_MYREGISTRY_COM_TOKEN=my-direct-token

# Password-based authentication
# OCI_PLUGINS_REGISTRY_MYREGISTRY_COM_USERNAME=myuser
# OCI_PLUGINS_REGISTRY_MYREGISTRY_COM_PASSWORD_ENV=MY_REGISTRY_PASSWORD

# ============================================================================
# OCI Public Keys for Signature Verification (Enterprise Edition Only)
# ============================================================================
# Public keys for verifying plugin signatures
# NOTE: OCI signature verification is available exclusively in Enterprise Edition
# Community Edition ignores these settings and skips signature verification

# Numbered keys (content directly in environment variable)
# OCI_PLUGINS_PUBKEY_1="-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA...\n-----END PUBLIC KEY-----"

# File-based keys (path to public key file)
# OCI_PLUGINS_PUBKEY_FILE_COSIGN=/etc/ai-studio/cosign.pub
# OCI_PLUGINS_PUBKEY_FILE_COMPANY=/etc/ai-studio/company-signing.pub

# ============================================================================
# Plugin Security Configuration
# ============================================================================
# Plugin security features control network access and signature verification

# Community Edition Security (Always Available):
# - Path whitelisting (filesystem security)
# - Checksum validation (integrity checking)

# Enterprise Edition Security (Requires License):
# - GRPC host whitelisting (blocks internal network access)
# - OCI signature verification (Cosign-based supply chain security)


# GRPC Host Whitelisting (Enterprise Edition Only)
# Controls whether plugins can target internal network addresses
# Default: false (blocks 10.x, 192.168.x, 127.x, ::1, etc.)
# Set to true ONLY in development environments
ALLOW_INTERNAL_NETWORK_ACCESS=true

# Logging
LOG_LEVEL=info  # Options: trace, debug, info, warn, error

# Telemetry configuration (Enterprise Edition)
# LICENSE_TELEMETRY_URL=https://telemetry.tyk.technology/api/track
# LICENSE_TELEMETRY_PERIOD=1h              # How often to send telemetry
# LICENSE_VALIDITY_CHECK_PERIOD=24h        # How often to re-validate license
# LICENSE_DISABLE_TELEMETRY=false          # Set to true to disable telemetry
# LICENSE_TELEMETRY_CONCURRENCY=20         # Max concurrent telemetry requests

# ============================================================================
# Hub-and-Spoke gRPC Control Server Configuration (AI Studio)
# ============================================================================
# Gateway mode: "standalone" (default) or "control" (hub that manages edge gateways)
# Set to "control" to enable gRPC control server for managing edge microgateway instances
GATEWAY_MODE=control

# gRPC Control Server Configuration
# The control server manages edge microgateway instances via gRPC
GRPC_PORT=9080                              # gRPC server port 
GRPC_HOST=0.0.0.0                           # gRPC server host - 0.0.0.0 listens on all interfaces

# gRPC TLS Configuration
# TLS is ENABLED by default for production security
# To disable TLS for local development only, set GRPC_TLS_INSECURE=true
GRPC_TLS_INSECURE=true                      # DEVELOPMENT ONLY - disables TLS
# GRPC_TLS_CERT_PATH=/path/to/server-cert.pem  # TLS certificate for control server (required if TLS enabled)
# GRPC_TLS_KEY_PATH=/path/to/server-key.pem    # TLS private key for control server (required if TLS enabled)

# gRPC Authentication
# Required for authenticating edge microgateway instances connecting to control
GRPC_AUTH_TOKEN=822d3d1e0e2d849263e45fc7bb842364      # Current authentication token
MICROGATEWAY_ENCRYPTION_KEY=822d3d1e0e2d849263e45fc7bb842364
# GRPC_AUTH_TOKEN_NEXT=                     # Next token for zero-downtime rotation
