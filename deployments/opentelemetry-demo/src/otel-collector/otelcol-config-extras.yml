# Copyright The OpenTelemetry Authors
# SPDX-License-Identifier: Apache-2.0

# extra settings to be merged into OpenTelemetry Collector configuration
# do not delete this file

## Example configuration for sending data to your own OTLP HTTP backend
## Note: the spanmetrics exporter must be included in the exporters array
## if overriding the traces pipeline.
##
# 
# exporters:
#   otlphttp/grafana_cloud:
#     # https://github.com/open-telemetry/opentelemetry-collector/tree/main/exporter/otlphttpexporter
#     endpoint: "https://otlp-gateway-prod-eu-west-2.grafana.net/otlp"
#     auth:
#       authenticator: basicauth/grafana_cloud

# processors:
#   transform/drop_unneeded_resource_attributes:
#     # https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/transformprocessor
#     error_mode: ignore
#     trace_statements:
#       - context: resource
#         statements:
#           - delete_key(attributes, "k8s.pod.start_time")
#           - delete_key(attributes, "os.description")
#           - delete_key(attributes, "os.type")
#           - delete_key(attributes, "process.command_args")
#           - delete_key(attributes, "process.executable.path")
#           - delete_key(attributes, "process.pid")
#           - delete_key(attributes, "process.runtime.description")
#           - delete_key(attributes, "process.runtime.name")
#           - delete_key(attributes, "process.runtime.version")
#     metric_statements:
#       - context: resource
#         statements:
#           - delete_key(attributes, "k8s.pod.start_time")
#           - delete_key(attributes, "os.description")
#           - delete_key(attributes, "os.type")
#           - delete_key(attributes, "process.command_args")
#           - delete_key(attributes, "process.executable.path")
#           - delete_key(attributes, "process.pid")
#           - delete_key(attributes, "process.runtime.description")
#           - delete_key(attributes, "process.runtime.name")
#           - delete_key(attributes, "process.runtime.version")
#     log_statements:
#       - context: resource
#         statements:
#           - delete_key(attributes, "k8s.pod.start_time")
#           - delete_key(attributes, "os.description")
#           - delete_key(attributes, "os.type")
#           - delete_key(attributes, "process.command_args")
#           - delete_key(attributes, "process.executable.path")
#           - delete_key(attributes, "process.pid")
#           - delete_key(attributes, "process.runtime.description")
#           - delete_key(attributes, "process.runtime.name")
#           - delete_key(attributes, "process.runtime.version")
#   transform/add_resource_attributes_as_metric_attributes:
#     # https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/processor/transformprocessor
#     error_mode: ignore
#     metric_statements:
#       - context: datapoint
#         statements:
#           - set(attributes["deployment.environment"], resource.attributes["deployment.environment"])
#           - set(attributes["service.version"], resource.attributes["service.version"])

# extensions:
#   basicauth/grafana_cloud:
#     # https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/extension/basicauthextension
#     client_auth:
#       username: ""
#       password: ""

# connectors:
#   grafanacloud:
#     # https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/connector/grafanacloudconnector
#     host_identifiers: ["host.name"]

# service:
#   extensions:
#     [
#       basicauth/grafana_cloud,
#     ]
#   pipelines:
#     traces:
#       processors:
#         [resourcedetection, memory_limiter, transform, transform/drop_unneeded_resource_attributes, batch]
#       exporters: [otlp, debug, spanmetrics, otlphttp/grafana_cloud, grafanacloud]
#     metrics:
#       processors:
#         [
#           resourcedetection, memory_limiter, 
#           transform/drop_unneeded_resource_attributes,
#           transform/add_resource_attributes_as_metric_attributes,
#           batch
#         ]
#       exporters: [otlphttp/prometheus, debug, otlphttp/grafana_cloud]
#     metrics/grafanacloud:
#       receivers: [grafanacloud]
#       processors: [batch]
#       exporters: [otlphttp/grafana_cloud]
#     logs:
#       processors: [resourcedetection, memory_limiter, transform/drop_unneeded_resource_attributes, batch]
#       exporters: [opensearch, debug, otlphttp/grafana_cloud]
